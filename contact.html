<script>
document.getElementById('contactForm')?.addEventListener('submit', function(e) {
  e.preventDefault();
  const form = e.target;
  const formData = new FormData(form);

  // 1️⃣ Submit to Formspree
  fetch('https://formspree.io/f/mjkaeejn', {
    method: 'POST',
    body: formData,
    headers: { 'Accept': 'application/json' }
  }).catch(err => console.error('Formspree error:', err));

  // 2️⃣ Submit to your own backend (for Gmail email)
  fetch('/api/contact', {
    method: 'POST',
    body: JSON.stringify({
      name: form.name.value,
      email: form.email.value,
      message: form.message.value
    }),
    headers: { 'Content-Type': 'application/json' }
  }).then(res => {
    const blastPopup = document.getElementById('blastPopup');
    if (res.ok) {
      if (blastPopup) {
        blastPopup.querySelector('.blast-message').textContent = '✅ Your form has been submitted. Thank you!';
        blastPopup.classList.remove('hidden');
      }
      form.reset();
    } else {
      if (blastPopup) {
        blastPopup.querySelector('.blast-message').textContent = '⚠️ Submission failed. Please try again.';
        blastPopup.classList.remove('hidden');
      }
    }
  }).catch(() => {
    const blastPopup = document.getElementById('blastPopup');
    if (blastPopup) {
      blastPopup.querySelector('.blast-message').textContent = '⚠️ Submission failed. Please try again.';
      blastPopup.classList.remove('hidden');
    }
  });
});

// Close popup
document.getElementById('blastClose')?.addEventListener('click', () => {
  const blastPopup = document.getElementById('blastPopup');
  if (blastPopup) blastPopup.classList.add('hidden');
});
</script>
